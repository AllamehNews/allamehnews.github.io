<!DOCTYPE html>
<html lang="en">

<head>
    <!-- Meta -->
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <meta name="description" content="تنها منبع خبری معتبر علامه حلی 3">
    <meta name="keywords" content="News, School, اخبار, مدرسه, تیزهوشان, علامه حلی, علامه حلی 3">
    <meta name="author" content="علامه نیوز">

    <!-- Link -->
    <link rel="stylesheet" href="main.css">
    <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
    <link rel="manifest" href="site.webmanifest">
    <link rel="mask-icon" href="safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#3a1d29">
    <meta name="theme-color" content="#3a1d29">

    <!-- Title -->
    <title>علامه نیوز</title>
</head>

<body dir="rtl">
    <div class="header-div">
        <img src="./assets/Logo_Payiz.png" width="80px" />
        <h1>علامه نیوز</h1>
        <div class="links">
            <a href="./" style="margin-right: 0px;">صفحه اصلی</a>
            <a href="./news" class="header-news">
                <div class="number-of-new-news" id="number-of-new-news">2</div>
                <p>
                    اخبار ها
                </p>
            </a>
            <a href="./partnering">همکاری و ارتباط با ما</a>
        </div>
    </div>

    <p class="section-header">جدید ترین اخبار</p>
    <div class="news-container" id="newsest-news">


    </div>

    <p class="section-header">اخبار پیشنهادی</p>
    <div class="news-container" id="recommended-news">

    </div>

    <p class="section-header">اخبار اسپانسر شده</p>
    <div class="news-container" id="sponsored-news">
        <p class="no-article" id="sponsored-news-no-article">مقاله ای موجود نیست</p>
    </div>

    <p class="section-header">تمامی اخبار</p>
    <div class="news-container" id="all-news">
    </div>
</body>

</html>

<script type="text/javascript" src="./news-database.js"></script>
<script type="module">
    // All News
    var all_news_container = document.getElementById("all-news");

    for (const article in news_data) {
        if (news_data.hasOwnProperty(article)) {
            if (news_data[article]["page"] != "none") {
                all_news_container.innerHTML += `<a class="article-container" href="${news_data[article]["page"]}"><img src="${news_data[article]["image"]}" /><p class="title">${news_data[article]["title"]}</p><p class="description">${news_data[article]["description"]}</p><p class="date">${news_data[article]["date"]}</p></a>`;
            } else {
                all_news_container.innerHTML += `<a class="article-container"><img src="${news_data[article]["image"]}" /><p class="title">${news_data[article]["title"]}</p><p class="description">${news_data[article]["description"]}</p><p class="date">${news_data[article]["date"]}</p></a>`;
            }
        }
    }

    // Sponsored News
    var sponsored_news_container = document.getElementById("sponsored-news");
    var sponsored_news_counter = 0;
    for (const article in news_data) {
        if (news_data.hasOwnProperty(article) && news_data[article]["isSponsored"] === true) {
            if (news_data[article]["page"] != "none") {
                sponsored_news_container.innerHTML += `<a class="article-container" href="${news_data[article]["page"]}"><img src="${news_data[article]["image"]}" /><p class="title">${news_data[article]["title"]}</p><p class="description">${news_data[article]["description"]}</p><p class="date">${news_data[article]["date"]}</p></a>`;
            } else {
                sponsored_news_container.innerHTML += `<a class="article-container"><img src="${news_data[article]["image"]}" /><p class="title">${news_data[article]["title"]}</p><p class="description">${news_data[article]["description"]}</p><p class="date">${news_data[article]["date"]}</p></a>`;
            }
            sponsored_news_counter += 1;
        }
    }
    if (sponsored_news_counter > 0) {
        sponsored_news_container.removeChild(document.getElementById("sponsored-news-no-article"));
    }

    // Recommended News
    var recommended_news_container = document.getElementById("recommended-news");
    for (const article in news_data) {
        if (news_data.hasOwnProperty(article) && news_data[article]["isRecommended"] === true) {
            if (news_data[article]["page"] != "none") {
                recommended_news_container.innerHTML += `<a class="article-container" href="${news_data[article]["page"]}"><img src="${news_data[article]["image"]}" /><p class="title">${news_data[article]["title"]}</p><p class="description">${news_data[article]["description"]}</p><p class="date">${news_data[article]["date"]}</p></a>`;
            } else {
                recommended_news_container.innerHTML += `<a class="article-container"><img src="${news_data[article]["image"]}" /><p class="title">${news_data[article]["title"]}</p><p class="description">${news_data[article]["description"]}</p><p class="date">${news_data[article]["date"]}</p></a>`;
            }
        }
    }

    // Newset News
    var newest_news_container = document.getElementById("newsest-news");
    var newest_counter = 0;

    console.log(Object.keys(news_data).length);
    for (const article in news_data) {
        console.log(newest_counter)
        if (news_data.hasOwnProperty(article) && newest_counter >= Object.keys(news_data).length - 3) {
            if (news_data[article]["page"] != "none") {
                newest_news_container.innerHTML += `<a class="article-container" href="${news_data[article]["page"]}"><img src="${news_data[article]["image"]}" /><p class="title">${news_data[article]["title"]}</p><p class="description">${news_data[article]["description"]}</p><p class="date">${news_data[article]["date"]}</p></a>`;
            } else {
                newest_news_container.innerHTML += `<a class="article-container"><img src="${news_data[article]["image"]}" /><p class="title">${news_data[article]["title"]}</p><p class="description">${news_data[article]["description"]}</p><p class="date">${news_data[article]["date"]}</p></a>`;
            }
        }
        newest_counter += 1
    }

    // Header News Counter
    var news_ammount_text = document.getElementById("number-of-new-news");
    news_ammount_text.innerText = Object.keys(news_data).length;
</script>